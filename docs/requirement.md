## 잔액 충전

- 사용자 식별자 및 충전할 금액을 받아 잔액을 충전한다.
- 충전 요청 대상 사용자는 존재하는 사용자여야 한다.
- 충전 금액(`chargeAmount`)은 최소 10,000원 이상이어야 한다.
- 충전 후 보유 금액(`amount + chargeAmount`)이 2,000,000원을 초과할 수 없다.
- 동시에 여러 번 잔액 충전 요청이 들어와도 각 요청이 정상적으로 적용되어야 한다.

## 잔액 조회

- 사용자 식별자를 통해 해당 사용자의 잔액을 조회한다.
- 잔액 조회 대상 사용자는 존재하는 사용자여야 한다.
- 조회 결과에는 사용자 식별자, 잔액이 포함되어야 한다.

## 재고 추가

- 상품 이름, 가격, 수량으로 재고를 등록한다.
- 수량(`quantity`)은 양수이어야 한다.

## 재고 조회

- 조회 결과에는 ID, 상품 이름, 가격, 잔여수량이 포함되어야 한다.
- 조회 시점의 상품별 잔여수량이 정확해야 한다.

## 선착순 쿠폰 발급

- 사용자 식별자와 쿠폰 식별자를 통해 쿠폰을 발급 받는다.
- 선착순 쿠폰 발급 사용자는 존재하는 사용자여야 한다.
- 기간 내 1인 1회 쿠폰 발급이 되어야 한다.
- 동시에 여러명이 쿠폰 발급 시 선착순으로 적용되어야 한다.

## 보유 쿠폰 목록 조회

- 보유 쿠폰 목록 조회 사용자는 존재하는 사용자여야 한다.
- 조회 결과에는 만료일, 조건, 쿠폰 이름이 포함되어야 한다.
- 유효한 쿠폰만 볼 수 있다.
  - 유효하지 않은 경우 : 사용한 쿠폰, 기간이 만료된 쿠폰
- 정렬 순서: 만료일이 임박한 순서 → 최근 발급 순서로 정렬한다.

## 주문/결제

- 주문/결제 사용자는 존재하는 사용자여야 한다.
- 주문하려는 상품 ID 는 존재하는 상품이어야 한다.
- 부족하지 않은 경우에만 재고를 차감해야 한다.
- 사용하려는 쿠폰이 있는 경우 쿠폰 사용 처리를 하고, 쿠폰 사용 히스토리를 남겨야 한다.
- 쿠폰 사용에 실패할 시 재고에 대해서 롤백해야 한다.
- 주문 당 여러개의 쿠폰을 사용할 수 있다.
- 결제는 기 충전된 잔액을 기반으로 수행하며 성공할 시 잔액을 차감해야 한다.
- 결제에 실패할 시 쿠폰과 재고에 대해서 롤백해야 한다.
- 데이터 분석을 위해 결제 성공 시에 실시간으로 주문 정보를 데이터 플랫폼에 전송해야 한다.
- 동일한 주문에 대해서 중복으로 요청 시 한번만 처리해야 한다.

## 상위 상품 조회

- 최근 3일간 가장 많이 팔린 상위 5개 상품 정보를 조회해야 한다.
- 상위 5개 상품에 대해서 많이 팔린 순으로 정렬한다.
